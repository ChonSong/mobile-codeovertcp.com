// Mobile UI Improvements for code-server
// Generated by UltraThink v6.1

class MobileUIImprovements {
  constructor() {
    this.sidebarVisible = false;
    this.initializeImprovements();
  }

  initializeImprovements() {
    this.createSidebarToggle();
    this.enhanceScrollwheel();
    this.addTouchSupport();
  }

  createSidebarToggle() {
    // Create large, touch-friendly sidebar toggle
    const toggle = document.createElement('button');
    toggle.id = 'mobile-sidebar-toggle';
    toggle.innerHTML = 'â˜°';
    toggle.style.cssText = 'position: fixed; top: 10px; left: 10px; z-index: 10000; width: 44px; height: 44px; font-size: 18px; background: #007acc; color: white; border: none; border-radius: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center;';

    toggle.addEventListener('click', () => this.toggleSidebar());
    document.body.appendChild(toggle);
  }

  toggleSidebar() {
    const sidebar = document.querySelector('.sidebar') ||
                   document.querySelector('[class*="sidebar"]') ||
                   document.querySelector('[class*="explorer"]');

    if (sidebar) {
      this.sidebarVisible = !this.sidebarVisible;
      sidebar.style.transform = this.sidebarVisible ? 'translateX(0)' : 'translateX(-100%)';
      sidebar.style.transition = 'transform 0.3s ease';
    }
  }

  enhanceScrollwheel() {
    // Make scrollwheel buttons larger and more touch-friendly
    const style = document.createElement('style');
    style.textContent = '.monaco-scrollable-element > .scrollbar > .slider { min-width: 20px !important; min-height: 40px !important; border-radius: 4px !important; } .monaco-scrollable-element > .scrollbar.vertical .slider { min-width: 20px !important; background: #424242 !important; } .monaco-scrollable-element > .scrollbar.horizontal .slider { min-height: 20px !important; background: #424242 !important; }';
    document.head.appendChild(style);
  }

  addTouchSupport() {
    // Add touch gesture support for mobile
    let touchStartX = 0;
    let touchStartY = 0;

    document.addEventListener('touchstart', (e) => {
      touchStartX = e.touches[0].clientX;
      touchStartY = e.touches[0].clientY;
    });

    document.addEventListener('touchend', (e) => {
      const touchEndX = e.changedTouches[0].clientX;
      const touchEndY = e.changedTouches[0].clientY;
      const deltaX = touchEndX - touchStartX;

      // Swipe right to open sidebar
      if (deltaX > 50 && Math.abs(touchEndY - touchStartY) < 100) {
        if (!this.sidebarVisible) {
          this.toggleSidebar();
        }
      }
    });
  }
}

// Initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', () => new MobileUIImprovements());
} else {
  new MobileUIImprovements();
}

console.log('Mobile UI improvements loaded by UltraThink v6.1');